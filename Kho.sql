CREATE DATABASE NhapXuatKho

CREATE TABLE DMHang(
	MaDM VARCHAR(10) NOT NULL PRIMARY KEY,
	TenDM NVARCHAR(50)
)
GO
CREATE TABLE ThuongHieu(
	MaTH VARCHAR(10) NOT NULL PRIMARY KEY,
	TenTH NVARCHAR(50),
	TruSo NVARCHAR(50),
	Website NVARCHAR(50)
)
GO
CREATE TABLE MatHang(
	MaMH VARCHAR(10) NOT NULL PRIMARY KEY,
	TenMH NVARCHAR(50),
	MaDM VARCHAR(10) REFERENCES dbo.DMHang,
	MaTH VARCHAR(10) REFERENCES dbo.ThuongHieu,
	DVT VARCHAR(10),
	SoLuong INT,
	MoTa NVARCHAR(100)
)
GO
CREATE TABLE ThanhToan(
	MaTT VARCHAR(10) NOT NULL PRIMARY KEY,
	TenTT NVARCHAR(50)
)
GO
CREATE TABLE KieuDoiTac(
	MaKieuDT VARCHAR(10) NOT NULL PRIMARY KEY,
	TenKieuDT NVARCHAR(50)
)
GO
CREATE TABLE DoiTac(
	MaDT VARCHAR(10) NOT NULL PRIMARY KEY,
	MaKieuDT VARCHAR(10) REFERENCES dbo.KieuDoiTac,
	TenDT NVARCHAR(50),
	DiaChi NVARCHAR(100),
	SoDT VARCHAR(20),
	Email VARCHAR(50)
)
GO
CREATE TABLE LoaiPhieu(
	MaLoaiPhieu VARCHAR(10) NOT NULL PRIMARY KEY,
	TenLoaiPhieu NVARCHAR(50)
)
GO
CREATE TABLE NhanVien(
	MaNV VARCHAR(10) NOT NULL PRIMARY KEY,
	TenNV NVARCHAR(50),
	GioiTinh BIT,
	NgaySinh DATETIME,
	DiaChi NVARCHAR(100),
	ChucVu NVARCHAR(50),
	SoDT VARCHAR(20),
	Email VARCHAR(50)
)
GO
CREATE TABLE Phieu(
	MaPhieu VARCHAR(10) NOT NULL PRIMARY KEY,
	TenPhieu NVARCHAR(50),
	MaLoaiPhieu VARCHAR(10) REFERENCES dbo.LoaiPhieu,
	MaDT VARCHAR(10) REFERENCES dbo.DoiTac,
	MaNV VARCHAR(10) REFERENCES dbo.NhanVien,
	MaTT VARCHAR(10) REFERENCES dbo.ThanhToan,
	Ngay DATETIME,
)
GO
CREATE TABLE ChiTietPhieu(
	MaPhieu VARCHAR(10) NOT NULL REFERENCES dbo.Phieu,
	MaMH VARCHAR(10) REFERENCES dbo.MatHang,
	SoLuong INT,
	GiaTien INT,
	TrangThaiTT BIT,
	GhiChu NVARCHAR(100)

	PRIMARY KEY (MaPhieu,MaMH)
)
GO
CREATE TABLE Lo(
	MaLo VARCHAR(10) NOT NULL PRIMARY KEY,
	MoTa NVARCHAR(100) 
)

ALTER TABLE dbo.MatHang ADD MaLo VARCHAR(10) REFERENCES dbo.Lo